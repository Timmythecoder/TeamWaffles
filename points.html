<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Waffles Points</title>
    <link rel="stylesheet" href="points.css">
</head>
<body>
    <div class="phone">
        <div class="screen">
            <div class="status-bar">
                <span class="signal"></span>
                <span class="wifi"></span>
                <span class="battery"></span>
            </div>
            <div class="content">
                <div id="loginFormContainer">
                    <h2>Login with your Team Waffles Account</h2>
                    <form id="loginForm">
                        <input type="text" id="username" placeholder="Username" required>
                        <input type="password" id="password" placeholder="Password" required>
                        <button type="submit">Login</button>
                    </form>
                    <p id="message"></p>
                </div>
                <div id="userInfo" style="display: none;">
                    <h2>Welcome fellow Waffler, <span id="usernameDisplay"></span>!</h2>
                    <p>Your Waffle points: <span id="pointsDisplay"></span></p>
                    <button id="showLeaderboard">Show Leaderboard</button>
                </div>
                <div id="leaderboardContainer" style="display: none;">
                    <h2>Leaderboard</h2>
                    <div id="leaderboard"></div>
                    <button id="hideLeaderboard">Hide Leaderboard</button>
                </div>
            </div>
        </div>
        <button class="home-button" onclick="BACK()"></button>
    </div>

    <script>
        function BACK() {
            window.location.replace('index.html');
        }

        document.getElementById('loginForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            var username = document.getElementById('username').value;
            var password = document.getElementById('password').value;
    
            var points = 0; // Default points value
    
            var users = {
                'Tim': 'OHIO:99999',
                'HARRIS': 'HARRIS111:950',
                'MAX': 'MAX222:700',
                'JACK': 'JACK333:125',
                'ABI': 'ABI444:600',
                'GINGER': 'GINGER555:100',
                'JAMES': 'JAMES666:550',
                'ANTONYO': 'ANTONYO777:600',
                'HIRO': 'HIRO888:555',
                'NOAH': 'NOAH1000:175',
                'ALEX': 'ALEX1111:638',
                'EMILY': 'EMILY2222:150',
                'HAYLEY': 'HAYLEY3333:100',
                'SHRIYAN': 'SHRIYAN4444:100',
                'MAALAV': 'MAALAV5555:100',
                'LUCAS': 'LUCAS6666:590',
                'JONO': 'JONO7777:325',
                'LOURDES': 'LOURDES8888:125',
                'MATTHEW': 'MATTHEW9999:675',
                'SCARLETT': 'SCARLETT11111:325',
                'BEN': 'BEN22222:825',
                'IAN': 'IAN33333:111',
                'SAMUEL': 'SAMUEL44444:200'
            };
    
            if (users[username] && users[username].split(':')[0] === password) {
                points = parseInt(users[username].split(':')[1], 10);
                document.getElementById('message').textContent = 'Login successful. Redirecting...';
                document.getElementById('loginFormContainer').style.display = 'none';
                document.getElementById('userInfo').style.display = 'block';
                document.getElementById('usernameDisplay').textContent = username;
                document.getElementById('pointsDisplay').textContent = points;

                // Update the leaderboard thanks for thehelp on the complex parts
                updateLeaderboard(users);
            } else {
                document.getElementById('message').textContent = 'Invalid username or password. Please try again. (theres no point trying to hack someones account if they have more points than you :))';
            }
        });

        function updateLeaderboard(users) {
            const leaderboardElement = document.getElementById('leaderboard');
            leaderboardElement.innerHTML = ''; // Clear existing leaderboard

            // Create a sortable array of users by points
            const sortedUsers = Object.keys(users).map(user => {
                return {
                    name: user,
                    points: parseInt(users[user].split(':')[1], 10)
                };
            }).sort((a, b) => b.points - a.points);

            // Populate the leaderboard
            sortedUsers.forEach(user => {
                const item = document.createElement('div');
                item.className = 'leaderboard-item';
                item.innerHTML = `${user.name} <span>${user.points}</span>`;
                leaderboardElement.appendChild(item);
            });

            document.getElementById('leaderboardContainer').style.display = 'block';
        }

        document.getElementById('showLeaderboard').addEventListener('click', function() {
            document.getElementById('leaderboardContainer').style.display = 'block';
        });

        document.getElementById('hideLeaderboard').addEventListener('click', function() {
            document.getElementById('leaderboardContainer').style.display = 'none';
        });
    </script>
</body>
</html>
